<!DOCTYPE html>
<html>
<head>
	<title>My first Leaflet map</title>

	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css"
   integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ=="
   crossorigin=""/>

   <link rel="stylesheet" href="style.css">

   <!-- Make sure you put this AFTER Leaflet's CSS -->
   <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"
   integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log=="
   crossorigin=""></script>

   <!-- Leaflet plugin with config for free tile providers -->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-providers/1.1.17/leaflet-providers.min.js" integrity="sha256-Szek6bbasIbX8zo6Q7mTIvVpeaHHG/9feYBsrUPNreM=" crossorigin="anonymous"></script>
</head>
<body>


	<div id="mapid"></div>

   	<script>
   		var manhattan = [40.713, -74.006];
   		var palmToo = [40.7515, -73.9707];
		var myLat = 0;
		var myLong = 0;
   		var mySpot = [0, 0];

		var mymap = L.map('mapid').setView(palmToo, 13);

/*		var currentLocation = navigator.geolocation.getCurrentPosition(function(position) {
			console.log(position);
			console.log(position.coords);
			console.log(position.coords.latitude);
			console.log(position.coords.longitude);
			var myLat = position.coords.latitude;
			var myLong = position.coords.longitude;
			console.log(myLat);
			console.log(myLong);
		});*/

		function getLocation() {
			navigator.geolocation.getCurrentPosition(function(position) {
				// var myLat = position.coords.latitude;
				// var myLong = position.coords.longitude;
				mySpot = [position.coords.latitude, position.coords.longitude];

				var	myDataPoint2 = L.marker(mySpot).addTo(mymap);
				myDataPoint2.bindPopup("This is your current location.");
			});
		}

		/* navigator.geolocation.getCurrentPosition(function(position) {
  do_something(position.coords.latitude, position.coords.longitude);
}); */

		// Add OpenStreetMap tile layer to map
		// More at http://leaflet-extras.github.io/leaflet-providers/preview/
		
		// Add OpenStreetMap tile layer to map
		// L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', { attribution: 'Â© OpenStreetMap' }).addTo(mymap);

		// Add National Geographic tile layer to map
		L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}', {
			attribution: 'Tiles &copy; Esri &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC',
			maxZoom: 16
		}).addTo(mymap);

		getLocation();

		// Add marker for Palm Too, one of the best steakhouses in New York City!
		var myDataPoint = L.marker(palmToo).addTo(mymap);
			myDataPoint.bindPopup("This is <strong>The Palm Too</strong> steakhouse.");
		
		/* THIS DOESN'T WORK HERE. VAR MYSPOT IS OUT OF SCOPE AND WOULDN'T BE UPDATED HERE. MOVING THIS CODE INTO getLocation() WORKS.
		var myDataPoint2 = L.marker(mySpot).addTo(mymap);
			myDataPoint2.bindPopup("This is your current location."); */	


	</script>

</body>
</html>